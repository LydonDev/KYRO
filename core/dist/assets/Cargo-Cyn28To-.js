import{h as W,c as de,u as me,r as x,j as e,L as xe,B as u}from"./main-D6weWVn6.js";import{z as l}from"./index-mSkvzYyn.js";import{C as G}from"./card-DxFMsxNs.js";import{P as z,A as Z,T as O}from"./trash-BRkT18N2.js";import{C as q}from"./chevron-right-DT_2dYLm.js";import{F as B}from"./folder-S0hP_hFp.js";import{P as Q}from"./pencil-DEEDJ0E3.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],J=W("file",he);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_=W("link",pe),ue=l.object({hidden:l.boolean().optional(),readonly:l.boolean().optional(),noDelete:l.boolean().optional(),customProperties:l.record(l.any()).optional()});l.object({id:l.string().optional(),name:l.string().min(1).max(255),description:l.string(),hash:l.string().optional(),size:l.number().optional(),mimeType:l.string().optional(),type:l.enum(["local","remote"]),remoteUrl:l.string().url().optional(),properties:ue.default({}),createdAt:l.date().optional(),updatedAt:l.date().optional()});l.object({id:l.string().optional(),name:l.string().min(1).max(255),description:l.string(),items:l.array(l.object({cargoId:l.string(),targetPath:l.string().min(1)})).default([]),createdAt:l.date().optional(),updatedAt:l.date().optional()});const M=c=>{if(c<1024)return`${c} B`;const j=c/1024;if(j<1024)return`${j.toFixed(2)} KB`;const f=j/1024;return f<1024?`${f.toFixed(2)} MB`:`${(f/1024).toFixed(2)} GB`},ge=({properties:c,onChange:j})=>{const[f,A]=x.useState(""),[F,D]=x.useState(""),P=()=>{f.trim()&&(j({...c,customProperties:{...c.customProperties||{},[f]:F}}),A(""),D(""))},E=d=>{if(!c.customProperties)return;const N={...c.customProperties};delete N[d],j({...c,customProperties:Object.keys(N).length>0?N:void 0})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx("input",{type:"checkbox",checked:c.hidden||!1,onChange:d=>j({...c,hidden:d.target.checked})}),e.jsx("span",{className:"text-xs",children:"Hidden (not visible to users)"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx("input",{type:"checkbox",checked:c.readonly||!1,onChange:d=>j({...c,readonly:d.target.checked})}),e.jsx("span",{className:"text-xs",children:"Read-only (users cannot modify)"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-gray-400",children:[e.jsx("input",{type:"checkbox",checked:c.noDelete||!1,onChange:d=>j({...c,noDelete:d.target.checked})}),e.jsx("span",{className:"text-xs",children:"No Delete (users cannot delete)"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"space-y-2",children:[c.customProperties&&Object.entries(c.customProperties).map(([d,N])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex-1 text-xs border border-stone-900 rounded-md p-2 bg-stone-950 text-gray-400",children:[e.jsxs("span",{className:"font-medium",children:[d,":"]})," ",JSON.stringify(N)]}),e.jsx(u,{type:"button",onClick:()=>E(d),variant:"danger",size:"sm",children:e.jsx(O,{className:"w-3.5 h-3.5 mr-1.5"})})]},d)),e.jsx("div",{className:"flex items-center ml-[435px]",children:e.jsx(u,{onClick:P,icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Add"})}),e.jsx("div",{className:"text-xs font-medium text-white",children:"Custom Properties"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:f,onChange:d=>A(d.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Property name"}),e.jsx("input",{type:"text",value:F,onChange:d=>D(d.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Property value"})]})]})})]})},je=({items:c,onChange:j})=>{const[f,A]=x.useState([]),[F,D]=x.useState(!1),[P,E]=x.useState(null),[d,N]=x.useState(!1),[h,i]=x.useState(""),[r,v]=x.useState("");x.useEffect(()=>{d&&m()},[d]);const m=async()=>{D(!0);try{const n=localStorage.getItem("token"),y=await fetch("/api/cargo",{headers:{Authorization:`Bearer ${n}`}});if(!y.ok)throw new Error("Failed to fetch cargo");const w=await y.json();A(w)}catch(n){E(n instanceof Error?n.message:"An error occurred")}finally{D(!1)}},b=()=>{!h||!r.trim()||(j([...c,{cargoId:h,targetPath:r}]),i(""),v(""),N(!1))},o=n=>{j(c.filter((y,w)=>w!==n))},k=f.filter(n=>!c.some(y=>y.cargoId===n.id));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Container Items"}),e.jsx(u,{type:"button",onClick:()=>N(!d),icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",size:"sm",children:"Add Item"})]}),P&&e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-xs",children:P}),d&&e.jsxs("div",{className:"border border-stone-900 rounded-md p-3 space-y-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2 text-white",children:"Add cargo to container"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Select Cargo"}),F?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Loading..."})}):e.jsxs("select",{value:h,onChange:n=>i(n.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,children:[e.jsx("option",{value:"",children:"-- Select cargo --"}),k.map(n=>e.jsxs("option",{value:n.id,children:[n.name," (",n.type==="local"?"Local File":"Remote URL",")"]},n.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Target Path"}),e.jsx("input",{type:"text",value:r,onChange:n=>v(n.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-[#232325] focus:border-stone-900
                    transition-colors duration-200`,placeholder:"/path/to/destination"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(u,{type:"button",onClick:()=>N(!1),size:"sm",children:"Cancel"}),e.jsx(u,{type:"button",onClick:b,disabled:!h||!r.trim(),variant:"secondary",size:"sm",children:"Add to Container"})]})]}),e.jsx("div",{children:c.length>0?e.jsx("div",{className:"space-y-2",children:c.map((n,y)=>{const w=f.find(L=>L.id===n.cargoId)||{name:"Loading...",type:"local"};return e.jsxs(G,{className:"flex justify-between items-center border border-stone-900 p-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"pt-1",children:w.type==="local"?e.jsx(J,{className:"w-4 h-4 text-gray-400"}):e.jsx(_,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:w.name}),e.jsxs("div",{className:"text-xs font-mono mt-1",children:["â†’ ",n.targetPath]})]})]}),e.jsx(u,{type:"button",onClick:()=>o(y),variant:"danger",size:"sm",icon:e.jsx(O,{className:"w-4 h-4"}),children:"Remove"})]},y)})}):e.jsx(G,{className:"text-center py-4 bg-stone-950 border border-stone-900 border-dashed ",children:e.jsx("p",{className:"text-xs text-gray-400",children:"No items in this container"})})})]})},Fe=()=>{const{user:c}=de(),j=me();x.useEffect(()=>{(!c||!c.permissions.includes("admin"))&&j("/unauthorized",{replace:!0})},[c,j]);const[f,A]=x.useState([]),[F,D]=x.useState([]),[P,E]=x.useState(!0),[d,N]=x.useState(null),[h,i]=x.useState("cargo-list"),[r,v]=x.useState(null),[m,b]=x.useState(null),[o,k]=x.useState({name:"",description:"",type:"local",properties:{},hash:"",size:0,mimeType:""}),[n,y]=x.useState({name:"",description:"",items:[]}),[w,L]=x.useState(null),[T,S]=x.useState(null),[H,V]=x.useState(!1);x.useEffect(()=>{X()},[]);const X=async()=>{E(!0);try{await Promise.all([I(),R()])}catch(s){N(s instanceof Error?s.message:"Failed to fetch data")}finally{E(!1)}},I=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/cargo",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Failed to fetch cargo");const a=await t.json();return A(a),a}catch(s){throw console.error("Failed to fetch cargo:",s),A([]),s}},R=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/cargo/container",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok){if(t.status===404)return D([]),[];throw new Error("Failed to fetch containers")}const a=await t.json();return D(a),a}catch(s){throw console.error("Failed to fetch containers:",s),D([]),s}},ee=async s=>{s.preventDefault(),S(null);try{if(!w)throw new Error("Please select a file to upload");V(!0);const t=new FormData;t.append("file",w),t.append("data",JSON.stringify({name:o.name,description:o.description,properties:o.properties}));const a=localStorage.getItem("token"),p=await fetch("/api/cargo/upload",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:t});if(!p.ok){const g=await p.json();throw new Error(g.error||"Failed to create cargo")}await I(),i("cargo-list"),U()}catch(t){S(t instanceof Error?t.message:"Failed to create cargo")}finally{V(!1)}},te=async s=>{s.preventDefault(),S(null);try{if(!o.remoteUrl)throw new Error("Remote URL is required");const t=localStorage.getItem("token"),a=await fetch("/api/cargo/remote",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:o.name,description:o.description,remoteUrl:o.remoteUrl,properties:o.properties})});if(!a.ok){const p=await a.json();throw new Error(p.error||"Failed to create remote cargo")}await I(),i("cargo-list"),U()}catch(t){S(t instanceof Error?t.message:"Failed to create remote cargo")}},se=async s=>{if(s.preventDefault(),!!r){S(null);try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/${r.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:o.name,description:o.description,properties:o.properties})});if(!a.ok){const p=await a.json();throw new Error(p.error||"Failed to update cargo")}await I(),i("cargo-view"),v({...r,name:o.name,description:o.description,properties:o.properties})}catch(t){S(t instanceof Error?t.message:"Failed to update cargo")}}},re=async s=>{try{const t=F.filter(g=>g.items.some(C=>C.cargoId===s));if(t.length>0){const g=t.map(C=>C.name).join(", ");throw new Error(`Cargo is used in containers: ${g}`)}const a=localStorage.getItem("token"),p=await fetch(`/api/cargo/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(!p.ok){const g=await p.json();throw new Error(g.error||"Failed to delete cargo")}await I(),(r==null?void 0:r.id)===s&&(i("cargo-list"),v(null))}catch(t){N(t instanceof Error?t.message:"Failed to delete cargo")}},ae=async s=>{s.preventDefault(),S(null);try{const t=localStorage.getItem("token"),a=await fetch("/api/cargo/container",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok){const p=await a.json();throw new Error(p.error||"Failed to create container")}await R(),i("container-list"),$()}catch(t){S(t instanceof Error?t.message:"Failed to create container")}},ne=async s=>{if(s.preventDefault(),!!m){S(null);try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/container/${m.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok){const p=await a.json();throw new Error(p.error||"Failed to update container")}await R(),i("container-view"),b({...m,name:n.name,description:n.description,items:n.items})}catch(t){S(t instanceof Error?t.message:"Failed to update container")}}},oe=async s=>{try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/container/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!a.ok){const p=await a.json();throw new Error(p.error||"Failed to delete container")}await R(),(m==null?void 0:m.id)===s&&(i("container-list"),b(null))}catch(t){N(t instanceof Error?t.message:"Failed to delete container")}},U=()=>{k({name:"",description:"",type:"local",properties:{},hash:"",size:0,mimeType:""}),L(null),v(null)},$=()=>{y({name:"",description:"",items:[]}),b(null)},K=s=>e.jsxs("form",{onSubmit:s==="create"?o.type==="local"?ee:te:se,className:"space-y-4 max-w-lg",children:[T&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:T})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Name"}),e.jsx("input",{type:"text",value:o.name,onChange:t=>k({...o,name:t.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"My Cargo Item",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:t=>k({...o,description:t.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Description of this cargo item...",rows:3,required:!0})]}),s==="create"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Cargo Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:o.type==="local",onChange:()=>k({...o,type:"local",remoteUrl:void 0}),name:"cargoType"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Local File"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:o.type==="remote",onChange:()=>k({...o,type:"remote"}),name:"cargoType"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Remote URL"})]})]})]}),o.type==="local"?e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Upload File"}),e.jsx("input",{type:"file",onChange:t=>L(t.target.files?t.target.files[0]:null),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,required:!0}),w&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Selected: ",w.name," (",M(w.size),")"]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Remote URL"}),e.jsx("input",{type:"url",value:o.remoteUrl||"",onChange:t=>k({...o,remoteUrl:t.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"https://example.com/file.zip",required:o.type==="remote"})]})]}),e.jsx(ge,{properties:o.properties,onChange:t=>k({...o,properties:t})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{type:"button",onClick:()=>{i(s==="edit"?"cargo-view":"cargo-list"),U()},children:"Cancel"}),e.jsx(u,{type:"submit",disabled:H,variant:"secondary",children:H?e.jsx(e.Fragment,{children:"Uploading..."}):s==="create"?"Create Cargo":"Update Cargo"})]})]}),ie=()=>{var s,t,a,p;return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{i("cargo-list"),v(null),U()},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.type==="local"?"Local File":"Remote URL"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{onClick:()=>{k({name:r.name,description:r.description,type:r.type,remoteUrl:r.remoteUrl,properties:r.properties,hash:r.hash,size:r.size,mimeType:r.mimeType}),i("cargo-edit")},icon:e.jsx(Q,{className:"w-3.5 h-3.5 mr-1.5"}),children:"Edit"}),e.jsx(u,{onClick:()=>re(r.id),variant:"danger",icon:e.jsx(O,{className:"w-3.5 h-3.5 mr-1.5"}),children:"Delete"}),r.type==="local"&&e.jsx("a",{href:`/api/cargo/${r.id}/download`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 text-xs font-medium text-gray-600 bg-stone-950 border border-stone-900 rounded-md hover:bg-stone-900",children:"Download"})]})]}),e.jsxs("div",{className:"bg-stone-950 border border-stone-900 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:r.description})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Cargo Details"}),e.jsx("div",{className:"space-y-2",children:r.type==="remote"?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Remote URL"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all",children:e.jsx("a",{href:r.remoteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:r.remoteUrl})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"File Type"}),e.jsx("div",{className:"text-sm mt-1",children:r.mimeType})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Size"}),e.jsx("div",{className:"text-sm mt-1",children:M(r.size||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Hash"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-xs break-all",children:r.hash})]})]})})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-3",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4 text-white",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Hidden:"})," ",(s=r.properties)!=null&&s.hidden?"Yes":"No"]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Read-only:"})," ",(t=r.properties)!=null&&t.readonly?"Yes":"No"]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-white",children:"No Delete:"})," ",(a=r.properties)!=null&&a.noDelete?"Yes":"No"]})]}),((p=r.properties)==null?void 0:p.customProperties)&&Object.keys(r.properties.customProperties).length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Custom Properties"}),e.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(r.properties.customProperties).map(([g,C])=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:"font-medium",children:[g,":"]})," ",JSON.stringify(C)]},g))})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-3",children:"Used In Containers"}),e.jsx("div",{children:F.filter(g=>g.items.some(C=>C.cargoId===r.id)).length>0?e.jsx("div",{className:"space-y-2",children:F.filter(g=>g.items.some(C=>C.cargoId===r.id)).map(g=>{var C;return e.jsxs("div",{className:"flex justify-between items-center border border-gray-100 rounded p-2 hover:bg-gray-50 cursor-pointer",onClick:()=>{b(g),i("container-view")},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:g.name}),e.jsx("div",{className:"text-xs text-gray-500",children:(C=g.items.find(le=>le.cargoId===r.id))==null?void 0:C.targetPath})]})]}),e.jsx(q,{className:"w-4 h-4 text-gray-400"})]},g.id)})}):e.jsx("div",{className:"text-xs text-gray-500",children:"Not used in any containers"})})]}),r.createdAt&&r.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-gray-100 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(r.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(r.updatedAt).toLocaleString()})]})]})]})]}):null},Y=s=>e.jsxs("form",{onSubmit:s==="create"?ae:ne,className:"space-y-4 max-w-lg",children:[T&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:T})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Name"}),e.jsx("input",{type:"text",value:n.name,onChange:t=>y({...n,name:t.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"My Container",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:t=>y({...n,description:t.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Description of this container...",rows:3,required:!0})]}),e.jsx(je,{items:n.items,onChange:t=>y({...n,items:t})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{type:"button",onClick:()=>{i(s==="edit"?"container-view":"container-list"),$()},children:"Cancel"}),e.jsx(u,{type:"submit",variant:"secondary",children:s==="create"?"Create Container":"Update Container"})]})]}),ce=()=>m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{i("container-list"),b(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.items.length," item",m.items.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{y({name:m.name,description:m.description,items:m.items}),i("container-edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(Q,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>oe(m.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(O,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:m.description})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-3",children:"Container Items"}),m.items.length>0?e.jsx("div",{className:"space-y-3",children:m.items.map((s,t)=>{const a=f.find(p=>p.id===s.cargoId);return e.jsx("div",{className:"border border-gray-100 rounded p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>{a&&(v(a),i("cargo-view"))},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"pt-1",children:(a==null?void 0:a.type)==="local"?e.jsx(J,{className:"w-4 h-4 text-gray-400"}):e.jsx(_,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:(a==null?void 0:a.name)||"Unknown Cargo"}),e.jsxs("div",{className:"text-xs font-mono mt-1",children:["â†’ ",s.targetPath]}),a&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.type==="local"?`${M(a.size||0)} â€¢ ${a.mimeType}`:"Remote URL"})]})]})},t)})}):e.jsx("div",{className:"text-xs text-gray-400",children:"No items in this container"})]}),m.createdAt&&m.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-stone-900 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(m.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(m.updatedAt).toLocaleString()})]})]})]})]}):null;return P?e.jsx(xe,{}):e.jsxs("div",{className:"card min-h-screen bg-stone-950",children:[d&&e.jsx("div",{className:"mb-4 space-y-2",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-md p-4 flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-3 mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error"}),e.jsx("p",{className:"mt-1 text-xs text-white/70",children:d})]})]})}),h==="cargo-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Cargo Items"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 mb-4",children:"Manage cargo items and containers for your application."}),e.jsxs("div",{className:"flex space-x-1 mt-2",children:[e.jsx(u,{onClick:()=>{i("cargo-list"),v(null),b(null)},variant:h==="cargo-list"?"primary":"secondary",className:h==="cargo-list"?"font-bold":"font-normal",children:"Cargo"}),e.jsx(u,{onClick:()=>{i("container-list"),v(null),b(null)},variant:h==="container-list"?"primary":"secondary",className:h==="container-list"?"font-bold":"font-normal",children:"Containers"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(u,{onClick:()=>{U(),i("cargo-create")},icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Create Cargo"})})]}),e.jsx("div",{className:"space-y-2",children:f.length>0?f.map(s=>e.jsx("div",{className:"bg-stone-950 border border-stone-900 rounded-md cursor-pointer hover:border-stone-900 transition-all duration-200",onClick:()=>{v(s),i("cargo-view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.type==="local"?e.jsx(J,{className:"w-5 h-5 text-gray-400"}):e.jsx(_,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.name}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.description||"No description"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(q,{className:"w-4 h-4 text-gray-400"})})]})},s.id)):e.jsx("div",{className:"text-center py-6 bg-stone-950 rounded-md border border-stone-900",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(B,{className:"w-6 h-6 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No Cargo found"}),e.jsx(u,{onClick:()=>{U(),i("cargo-create")},icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Create Cargo"})]})})})]}),h==="cargo-create"&&K("create"),h==="cargo-edit"&&K("edit"),h==="cargo-view"&&ie(),h==="container-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Containers"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 mb-4",children:"Manage cargo items and containers for your application."}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(u,{onClick:()=>{i("cargo-list"),v(null),b(null)},variant:h==="cargo-list"?"primary":"secondary",className:h==="cargo-list"?"font-bold":"font-normal",children:"Cargo"}),e.jsx(u,{onClick:()=>{i("container-list"),v(null),b(null)},variant:h==="container-list"?"primary":"secondary",className:h==="container-list"?"font-bold":"font-normal",children:"Containers"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(u,{onClick:()=>{$(),i("container-create")},icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Create Container"})})]}),e.jsx("div",{className:"space-y-2",children:F.length>0?F.map(s=>e.jsx("div",{className:"bg-stone-950 border border-stone-900 rounded-md shadow-xs cursor-pointer hover:border-gray-600 transition-all duration-200",onClick:()=>{b(s),i("container-view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.items.length," item",s.items.length!==1?"s":""]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(q,{className:"w-4 h-4 text-gray-400"})})]})},s.id)):e.jsx("div",{className:"text-center py-6 bg-stone-950 rounded-md border border-stone-900",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(B,{className:"w-6 h-6 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No containers found"}),e.jsx(u,{onClick:()=>{$(),i("container-create")},icon:e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Create Container"})]})})})]}),h==="container-create"&&Y("create"),h==="container-edit"&&Y("edit"),h==="container-view"&&ce()]})};export{Fe as default};
