import{r as t,u as C,j as e,d as b,a as w,e as f,f as p,B as I}from"./main-D6weWVn6.js";const q=()=>{const[c,g]=t.useState(""),[m,j]=t.useState(""),[o,y]=t.useState(""),[x,v]=t.useState(""),[u,n]=t.useState(""),[N,l]=t.useState(!1),[i,k]=t.useState(!1),[d,S]=t.useState(!1),h=C(),P=async s=>{if(s.preventDefault(),l(!0),n(""),o!==x){n("Passwords do not match"),l(!1);return}try{const a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,username:m,password:o})}),r=await a.json();if(!a.ok)throw new Error(r.error);localStorage.setItem("token",r.token),r.requiresVerification&&r.userId?(localStorage.setItem("requiresVerification","true"),localStorage.setItem("userId",r.userId),h("/verify-email",{state:{userId:r.userId,token:r.token,requiresVerification:!0}})):h("/servers")}catch(a){n(a instanceof Error?a.message:"An error occurred")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen flex bg-stone-950",children:[e.jsxs("div",{className:"w-2/5 p-10 flex flex-col justify-center border-r border-stone-900",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-semibold text-white",children:b})}),e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Create an account"}),e.jsx("p",{className:"text-lg mt-2 text-gray-400",children:"Join us to manage your servers."})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(w,{to:"https://github.com/lydondev",className:"inline-flex items-center text-gray-400 border-b border-stone-900",children:["Powered by ",b,e.jsx("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),e.jsx("div",{className:"w-3/5 flex items-center justify-center bg-stone-950",children:e.jsxs("div",{className:"rounded-xl p-8 w-full max-w-md bg-stone-950 border border-stone-900",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1 text-white",children:"Register"}),e.jsx("p",{className:"text-sm mb-6 text-gray-400",children:"Create a new account to get started."}),e.jsxs("form",{onSubmit:P,className:"space-y-5",children:[u&&e.jsx("div",{className:"rounded-md p-3 mb-4 bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-xs text-red-500",children:u})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-medium mb-1.5 text-gray-400",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:c,onChange:s=>g(s.target.value),className:"block w-full px-3 py-2 rounded-md text-sm bg-stone-950 border border-stone-900 text-white outline-none",placeholder:"email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-xs font-medium mb-1.5 text-gray-400",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:m,onChange:s=>j(s.target.value),className:"block w-full px-3 py-2 rounded-md text-sm bg-stone-950 border border-stone-900 text-white outline-none",placeholder:"yourusername",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-xs font-medium mb-1.5 text-gray-400",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:i?"text":"password",value:o,onChange:s=>y(s.target.value),className:"block w-full px-3 py-2 rounded-md text-sm bg-stone-950 border border-stone-900 text-white outline-none",placeholder:"*********",required:!0}),e.jsx("button",{type:"button",onClick:()=>k(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:i?e.jsx(f,{className:"h-4 w-4"}):e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-medium mb-1.5 text-gray-400",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:d?"text":"password",value:x,onChange:s=>v(s.target.value),className:"block w-full px-3 py-2 rounded-md text-sm bg-stone-950 border border-stone-900 text-white outline-none",placeholder:"*********",required:!0}),e.jsx("button",{type:"button",onClick:()=>S(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:d?e.jsx(f,{className:"h-4 w-4"}):e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsx(I,{type:"submit",variant:"secondary",size:"md",className:"w-full",isLoading:N,children:"Create Account"}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",e.jsx(w,{to:"/login",className:"text-gray-400",children:"Sign in"})]})})]})]})})]})};export{q as RegisterPage,q as default};
