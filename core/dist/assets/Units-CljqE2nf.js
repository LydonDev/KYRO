import{h as J,l as L,c as Q,u as ee,r as v,j as e,L as te,B as y}from"./main-D6weWVn6.js";import{z as o}from"./index-mSkvzYyn.js";import{C as q}from"./card-DxFMsxNs.js";import{C as se}from"./chevron-right-DT_2dYLm.js";import{A as ae,T as O,P as $}from"./trash-BRkT18N2.js";import{P as re}from"./pencil-DEEDJ0E3.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],oe=J("download",ne);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ce=J("package",ie);var H={exports:{}};(function(u,N){(function(S,k){k()})(L,function(){function S(r,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function k(r,t,j){var d=new XMLHttpRequest;d.open("GET",r),d.responseType="blob",d.onload=function(){p(d.response,t,j)},d.onerror=function(){console.error("could not download file")},d.send()}function g(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function m(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof L=="object"&&L.global===L?L:void 0,c=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(r,t,j){var d=i.URL||i.webkitURL,h=document.createElement("a");t=t||r.name||"download",h.download=t,h.rel="noopener",typeof r=="string"?(h.href=r,h.origin===location.origin?m(h):g(h.href)?k(r,t,j):m(h,h.target="_blank")):(h.href=d.createObjectURL(r),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){m(h)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,j){if(t=t||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(S(r,j),t);else if(g(r))k(r,t,j);else{var d=document.createElement("a");d.href=r,d.target="_blank",setTimeout(function(){m(d)})}}:function(r,t,j,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof r=="string")return k(r,t,j);var h=r.type==="application/octet-stream",l=/constructor/i.test(i.HTMLElement)||i.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent);if((n||h&&l||c)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var E=x.result;E=n?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=E:location=E,d=null},x.readAsDataURL(r)}else{var F=i.URL||i.webkitURL,C=F.createObjectURL(r);d?d.location=C:location.href=C,d=null,setTimeout(function(){F.revokeObjectURL(C)},4e4)}});i.saveAs=p.saveAs=p,u.exports=p})})(H);var le=H.exports;const de=o.object({name:o.string().min(1),description:o.string().optional(),defaultValue:o.string(),required:o.boolean().default(!1),userViewable:o.boolean().default(!0),userEditable:o.boolean().default(!1),rules:o.string()}),me=o.object({path:o.string().min(1),content:o.string()}),xe=o.object({dockerImage:o.string(),entrypoint:o.string().default("bash"),script:o.string()}),M=o.object({id:o.string().optional(),name:o.string().min(1).max(100),shortName:o.string().min(1).max(20).regex(/^[a-z0-9-]+$/),description:o.string(),dockerImage:o.string(),defaultStartupCommand:o.string(),configFiles:o.array(me).default([]),environmentVariables:o.array(de).default([]),installScript:xe,startup:o.object({userEditable:o.boolean().default(!1)}).default({}),createdAt:o.date().optional(),updatedAt:o.date().optional()});o.object({id:o.string(),name:o.string(),description:o.string(),items:o.array(o.object({cargoId:o.string(),targetPath:o.string()})),createdAt:o.date().optional(),updatedAt:o.date().optional()});const ue=({variables:u,onChange:N})=>{const S=()=>{N([...u,{name:"",description:"",defaultValue:"",required:!1,userViewable:!0,userEditable:!1,rules:"string"}])},k=m=>{N(u.filter((i,c)=>c!==m))},g=(m,i,c)=>{N(u.map((p,r)=>r===m?{...p,[i]:c}:p))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Environment Variables"}),e.jsx("button",{type:"button",onClick:S,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-stone-950 border border-stone-900 rounded-md hover:bg-gray-50",children:"Add Variable"})]}),u.map((m,i)=>e.jsx("div",{className:"border-t border-stone-900 p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:m.name,onChange:c=>g(i,"name",c.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900s focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Variable Name"}),e.jsx("input",{type:"text",value:m.defaultValue,onChange:c=>g(i,"defaultValue",c.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"Default Value"})]}),e.jsx("input",{type:"text",value:m.description||"",onChange:c=>g(i,"description",c.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                  text-sm text-[#FFFFFF]
                  focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                  transition-colors duration-200`,placeholder:"Description (optional)"}),e.jsx("input",{type:"text",value:m.rules,onChange:c=>g(i,"rules",c.target.value),className:`block w-full px-3 py-2 rounded-md bg-stone-900 border border-stone-900
                  text-sm text-[#FFFFFF]
                  focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                  transition-colors duration-200`,placeholder:"Validation Rules (e.g., string|max:20)"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.required,onChange:c=>g(i,"required",c.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.userViewable,onChange:c=>g(i,"userViewable",c.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs text-gray-400",children:"User Viewable"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.userEditable,onChange:c=>g(i,"userEditable",c.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs text-gray-400",children:"User Editable"})]})]})]}),e.jsx(y,{type:"button",onClick:()=>k(i),variant:"danger",size:"sm",className:"ml-4",children:e.jsx(O,{className:"w-4 h-4"})})]})},i)),u.length===0&&e.jsx("div",{className:"text-center py-4 border border-stone-900 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No variables defined"})})]})},pe=({files:u,onChange:N})=>{const S=()=>{N([...u,{path:"",content:""}])},k=m=>{N(u.filter((i,c)=>c!==m))},g=(m,i,c)=>{N(u.map((p,r)=>r===m?{...p,[i]:c}:p))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Configuration Files"}),e.jsx(y,{type:"button",onClick:S,icon:e.jsx($,{className:"w-4 h-4"}),variant:"secondary",children:"Add File"})]}),u.map((m,i)=>e.jsx("div",{className:"border border-stone-900 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsx("input",{type:"text",value:m.path,onChange:c=>g(i,"path",c.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"File Path (e.g., server.properties)"}),e.jsx("textarea",{value:m.content,onChange:c=>g(i,"content",c.target.value),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                  text-sm text-[#FFFFFF]
                  focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                  transition-colors duration-200 font-mono`,placeholder:"File Content",rows:5})]}),e.jsx(y,{type:"button",onClick:()=>k(i),icon:e.jsx(O,{className:"w-4 h-4"}),variant:"danger",children:"Remove"})]})},i)),u.length===0&&e.jsx("div",{className:"text-center py-4 border border-stone-900 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No configuration files defined"})})]})},_=({unitId:u,assignedContainers:N,onRefresh:S})=>{const[k,g]=v.useState([]),[m,i]=v.useState(!1),[c,p]=v.useState(null),[r,t]=v.useState(!1);v.useEffect(()=>{r&&j()},[r]);const j=async()=>{if(u){i(!0);try{const n=localStorage.getItem("token"),x=await fetch("/api/cargo/container",{headers:{Authorization:`Bearer ${n}`}});if(!x.ok){if(x.status===404)return g([]),[];throw new Error("Failed to fetch containers")}const F=await x.json();g(F)}catch(n){p(n instanceof Error?n.message:"An error occurred")}finally{i(!1)}}},d=async n=>{if(u)try{const x=localStorage.getItem("token");if(!(await fetch(`/api/units/${u}/containers/${n}`,{method:"POST",headers:{Authorization:`Bearer ${x}`}})).ok)throw new Error("Failed to assign container");S(),t(!1)}catch(x){p(x instanceof Error?x.message:"Failed to assign container")}},h=async n=>{if(u)try{const x=localStorage.getItem("token");if(!(await fetch(`/api/units/${u}/containers/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${x}`}})).ok)throw new Error("Failed to remove container");S()}catch(x){p(x instanceof Error?x.message:"Failed to remove container")}},l=k.filter(n=>!N.some(x=>x.id===n.id));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400",children:"Cargo Containers"}),e.jsx(y,{type:"button",onClick:()=>t(!r),icon:e.jsx($,{className:"w-3 h-3 mr-1"}),variant:"secondary",children:"Add Container"})]}),c&&e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-xs",children:c}),r&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",children:"Select a container to add"}),m?e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.length>0?l.map(n=>e.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded-md border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:n.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.items.length," items"]})]}),e.jsx(y,{type:"button",onClick:()=>d(n.id),icon:e.jsx($,{className:"w-3 h-3 mr-1"}),variant:"secondary",children:"Add"})]},n.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No available containers"})})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(y,{type:"button",onClick:()=>t(!1),children:"Cancel"})})]}),e.jsx("div",{children:N.length>0?e.jsx("div",{className:"space-y-2",children:N.map(n=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:n.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n.description}),n.items&&n.items.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-1",children:"Items:"}),e.jsx("div",{className:"space-y-1 ml-2",children:n.items.map((x,F)=>e.jsxs("div",{className:"text-xs",children:["→"," ",e.jsx("span",{className:"font-mono",children:x.targetPath})]},F))})]})]}),e.jsx(y,{onClick:()=>h(n.id),icon:e.jsx(O,{className:"w-4 h-4"}),variant:"danger",children:"Remove"})]})},n.id))}):e.jsx("div",{className:"text-center py-4 border border-stone-900 border-dashed rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ce,{className:"w-5 h-5 text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No containers assigned"})]})})})]})},ye=()=>{const{user:u}=Q(),N=ee();v.useEffect(()=>{(!u||!u.permissions.includes("admin"))&&N("/unauthorized",{replace:!0})},[u,N]);const[S,k]=v.useState([]),[g,m]=v.useState(!0),[i,c]=v.useState(null),[p,r]=v.useState("list"),[t,j]=v.useState(null),[d,h]=v.useState([]),[l,n]=v.useState({name:"",shortName:"",description:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1}}),[x,F]=v.useState(null);console.log(i),v.useEffect(()=>{C()},[]);const C=async()=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/units",{headers:{Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error("Failed to fetch units");const f=await a.json();k(f),m(!1)}catch(s){c(s instanceof Error?s.message:"An error occurred"),m(!1)}},E=async s=>{try{const a=localStorage.getItem("token"),f=await fetch(`/api/units/${s}/containers`,{headers:{Authorization:`Bearer ${a}`}});if(!f.ok)throw new Error("Failed to fetch unit containers");const w=await f.json();h(w)}catch(a){console.error("Failed to fetch containers:",a),h([])}};v.useEffect(()=>{t!=null&&t.id&&(p==="view"||p==="edit")&&E(t.id)},[t,p]);const X=async s=>{s.preventDefault(),F(null);try{const a=M.omit({id:!0,createdAt:!0,updatedAt:!0}).parse(l),f=localStorage.getItem("token"),w=await fetch("/api/units",{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!w.ok){const V=await w.json();throw new Error(V.error||"Failed to create unit")}await C(),r("list"),T()}catch(a){a instanceof o.ZodError?F("Invalid input. Please check your data."):F(a instanceof Error?a.message:"Failed to create unit")}},G=async s=>{if(s.preventDefault(),!!t){F(null);try{const a=M.partial().omit({id:!0,createdAt:!0,updatedAt:!0}).parse(l),f=localStorage.getItem("token"),w=await fetch(`/api/units/${t.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!w.ok){const V=await w.json();throw new Error(V.error||"Failed to update unit")}await C(),r("list"),T()}catch(a){a instanceof o.ZodError?F("Invalid input. Please check your data."):F(a instanceof Error?a.message:"Failed to update unit")}}},Z=async s=>{try{const a=localStorage.getItem("token"),f=await fetch(`/api/units/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(!f.ok){const w=await f.json();throw new Error(w.error||"Failed to delete unit")}await C(),(t==null?void 0:t.id)===s&&(r("list"),j(null))}catch(a){c(a instanceof Error?a.message:"Failed to delete unit")}},T=()=>{n({name:"",shortName:"",description:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1}}),j(null),h([])},K=s=>{const a={name:s.name,shortName:s.shortName,description:s.description,dockerImage:s.dockerImage,defaultStartupCommand:s.defaultStartupCommand,configFiles:s.configFiles,environmentVariables:s.environmentVariables,installScript:s.installScript,startup:s.startup},f=new Blob([JSON.stringify(a,null,2)],{type:"application/json"});le.saveAs(f,`unit-${s.shortName}.json`)},W=async s=>{var w;if(!((w=s.target.files)!=null&&w.length))return;const a=s.target.files[0],f=new FileReader;f.onload=async V=>{var D;try{const A=(D=V.target)==null?void 0:D.result,b=JSON.parse(A),B=localStorage.getItem("token"),R=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},body:JSON.stringify(b)});if(!R.ok){const U=await R.json();throw new Error(U.error||"Import failed")}await C(),r("list")}catch(A){c(A instanceof Error?A.message:"Failed to import unit")}},f.readAsText(a)},P=async s=>{var w;if(!((w=s.target.files)!=null&&w.length))return;const a=s.target.files[0],f=new FileReader;f.onload=async V=>{var D;try{const A=(D=V.target)==null?void 0:D.result;let b=JSON.parse(A);typeof b=="string"&&(b=b.replace("{{","%").replace("}}","%"),b=JSON.parse(b));const B={name:b.name,shortName:b.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),description:b.description,dockerImage:Object.values(b.docker_images)[0],defaultStartupCommand:b.startup,configFiles:[],environmentVariables:b.variables.map(I=>({name:I.env_variable,description:I.description,defaultValue:I.default_value,required:I.rules.includes("required"),userViewable:I.user_viewable,userEditable:I.user_editable,rules:I.rules})),installScript:{dockerImage:b.scripts.installation.container,entrypoint:b.scripts.installation.entrypoint,script:b.scripts.installation.script},startup:{userEditable:!0}},R=localStorage.getItem("token"),U=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(B)});if(!U.ok){const I=await U.json();throw new Error(I.error||"Import failed")}await C(),r("list")}catch(A){c(A instanceof Error?A.message:"Failed to import Pterodactyl egg")}},f.readAsText(a)},z=s=>e.jsxs("form",{onSubmit:s==="create"?X:G,className:"space-y-4 max-w-lg",children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:x})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Name"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>n({...l,name:a.target.value}),className:`block w-full px-3 py-2 rounded-md bg-stone-900 border border-stone-900
            text-sm text-[#FFFFFF]
            focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
            transition-colors duration-200`,placeholder:"Minecraft Java Server",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Short Name (lowercase, numbers, hyphens)"}),e.jsx("input",{type:"text",value:l.shortName,onChange:a=>n({...l,shortName:a.target.value.toLowerCase()}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
                    text-sm text-[#FFFFFF]
                    focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
                    transition-colors duration-200`,placeholder:"minecraft-java",pattern:"[a-z0-9-]+",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:a=>n({...l,description:a.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
            text-sm text-[#FFFFFF]
            focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
            transition-colors duration-200`,placeholder:"Detailed description of the unit...",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Docker Image"}),e.jsx("input",{type:"text",value:l.dockerImage,onChange:a=>n({...l,dockerImage:a.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
            text-sm text-[#FFFFFF]
            focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
            transition-colors duration-200`,placeholder:"itzg/minecraft-server:java17",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Default Startup Command"}),e.jsx("input",{type:"text",value:l.defaultStartupCommand,onChange:a=>n({...l,defaultStartupCommand:a.target.value}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
            text-sm text-[#FFFFFF]
            focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
            transition-colors duration-200`,placeholder:"java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar server.jar",required:!0})]}),e.jsx(ue,{variables:l.environmentVariables,onChange:a=>n({...l,environmentVariables:a})}),e.jsx(pe,{files:l.configFiles,onChange:a=>n({...l,configFiles:a})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-white",children:"Install Script Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:l.installScript.dockerImage,onChange:a=>n({...l,installScript:{...l.installScript,dockerImage:a.target.value}}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
              text-sm text-[#FFFFFF]
              focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
              transition-colors duration-200`,placeholder:"Install Docker Image",required:!0}),e.jsx("input",{type:"text",value:l.installScript.entrypoint,onChange:a=>n({...l,installScript:{...l.installScript,entrypoint:a.target.value}}),className:`w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
              text-sm text-[#FFFFFF]
              focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
              transition-colors duration-200`,placeholder:"Entrypoint (default: bash)",defaultValue:"bash"})]}),e.jsx("textarea",{value:l.installScript.script,onChange:a=>n({...l,installScript:{...l.installScript,script:a.target.value}}),className:`mt-2 w-full px-3 py-2 rounded-md bg-stone-950 border border-stone-900
            text-sm text-[#FFFFFF]
            focus:outline-none focus:ring-1 focus:ring-stone-900 focus:border-stone-900
            transition-colors duration-200 font-mono`,placeholder:"Install script commands...",rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400",children:"Startup Configuration"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.startup.userEditable,onChange:a=>n({...l,startup:{...l.startup,userEditable:a.target.checked}}),className:"text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"User Editable"})]})})]}),s==="edit"&&(t==null?void 0:t.id)&&e.jsx("div",{className:"pt-4 border-t border-stone-900",children:e.jsx(_,{unitId:t.id,assignedContainers:d,onRefresh:()=>E(t.id)})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{type:"button",onClick:()=>{r(s==="edit"?"view":"list"),T()},children:"Cancel"}),e.jsx(y,{type:"submit",variant:"secondary",children:s==="create"?"Create Unit":"Update Unit"})]})]}),Y=()=>t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(y,{onClick:()=>{r("list"),j(null)},variant:"secondary",icon:e.jsx(ae,{className:"w-3.5 h-3.5 mr-1.5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.shortName})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{onClick:()=>{n({name:t.name,shortName:t.shortName,description:t.description,dockerImage:t.dockerImage,defaultStartupCommand:t.defaultStartupCommand,configFiles:t.configFiles||[],environmentVariables:t.environmentVariables||[],installScript:t.installScript,startup:t.startup}),r("edit")},variant:"secondary",icon:e.jsx(re,{className:"w-3.5 h-3.5 mr-1.5"}),children:"Edit"}),e.jsx(y,{onClick:()=>Z(t.id),icon:e.jsx(O,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"danger",children:"Delete"}),e.jsx(y,{onClick:()=>K(t),icon:e.jsx(oe,{className:"w-3.5 h-3.5 mr-1.5"}),variant:"secondary",children:"Export"})]})]}),e.jsxs(q,{className:"bg-stone-950 border border-stone-900 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#FFFFFF]",children:"Description"}),e.jsx("div",{className:"text-sm mt-1 text-gray-400",children:t.description})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-[#FFFFFF] mb-3",children:"Docker Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#FFFFFF]",children:"Image"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:t.dockerImage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#FFFFFF]",children:"Default Startup Command"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all text-gray-400",children:t.defaultStartupCommand})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-[#FFFFFF] mb-3",children:"Environment Variables"}),t.environmentVariables.length>0?e.jsx("div",{className:"space-y-3",children:t.environmentVariables.map((s,a)=>e.jsxs(q,{className:"bg-stone-950 border border-stone-900 p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#FFFFFF]",children:"Name"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:s.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Default Value"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:s.defaultValue})]})]}),s.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1 text-gray-400",children:s.description})]}),e.jsxs("div",{className:"mt-2 flex space-x-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:s.required?"Required":"Optional"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.userViewable?"User Viewable":"Hidden"}),e.jsx("div",{className:"text-xs text-gray-400",children:s.userEditable?"User Editable":"Locked"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Validation Rules"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:s.rules})]})]},a))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No environment variables defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-[#FFFFFF] mb-3",children:"Configuration Files"}),t.configFiles.length>0?e.jsx("div",{className:"space-y-3",children:t.configFiles.map((s,a)=>e.jsxs("div",{className:"border-t border-stone-900 p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Path"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:s.path})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Content"}),e.jsx("pre",{className:"mt-1 p-2 bg-stone-950 rounded text-xs font-mono whitespace-pre-wrap text-gray-400",children:s.content})]})]},a))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No configuration files defined"})]}),e.jsx("div",{className:"pt-4 border-t border-stone-900",children:e.jsx(_,{unitId:t.id,assignedContainers:d,onRefresh:()=>E(t.id)})}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 mb-3",children:"Install Script"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Docker Image"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:t.installScript.dockerImage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Entrypoint"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-gray-400",children:t.installScript.entrypoint})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Script"}),e.jsx("pre",{className:"mt-2 p-3 bg-stone-950 rounded-md text-xs font-mono overflow-auto text-gray-400",children:t.installScript.script})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-900",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 mb-3",children:"Startup Configuration"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.startup.userEditable?"Users can modify startup command":"Startup command is locked"})]}),t.createdAt&&t.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-stone-900 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1 text-gray-400",children:new Date(t.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1 text-gray-400",children:new Date(t.updatedAt).toLocaleString()})]})]})]})]}):null;return g?e.jsx(te,{}):e.jsxs("div",{className:"card min-h-screen bg-stone-950",children:[p==="list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-[#FFFFFF]",children:"Units"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Manage units and their configuration for accessing the panel."})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"file",id:"importFile",className:"hidden",accept:".json",onChange:W}),e.jsx(y,{onClick:()=>{var s;return(s=document.getElementById("importFile"))==null?void 0:s.click()},variant:"secondary",children:"Import Unit"}),e.jsx("input",{type:"file",id:"importEgg",className:"hidden",accept:".json",onChange:P}),e.jsx(y,{onClick:()=>{var s;return(s=document.getElementById("importEgg"))==null?void 0:s.click()},variant:"secondary",children:"Import Pterodactyl Egg"}),e.jsx("input",{type:"file",id:"importEgg",className:"hidden",accept:".json",onChange:P}),e.jsx(y,{onClick:()=>r("create"),variant:"secondary",children:"Create Unit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[S.map(s=>e.jsx(q,{className:"bg-stone-950 border-t border-stone-900 cursor-pointer",onClick:()=>{j(s),r("view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-[#FFFFFF]",children:s.name}),e.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[s.shortName," • ",s.dockerImage]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(se,{className:"w-4 h-4 text-gray-400"})})]})},s.id)),S.length===0&&e.jsx("div",{className:"text-center py-6 bg-stone-950 rounded-md border border-stone-900",children:e.jsx("p",{className:"text-xs text-[#FFFFFF]",children:"No units found"})})]})]}),p==="create"&&z("create"),p==="edit"&&z("edit"),p==="view"&&Y()]})};export{ye as default};
